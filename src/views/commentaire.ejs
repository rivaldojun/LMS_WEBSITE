<%- include('navbar.ejs', { currentPage: 'academy' }) %>
<div class="" style="background-color: #e9f2fb;">
  <form method="POST" action="/enregistrer-commentaire/1" id="form-commentaire" style="background-color: #e9f2fb;">
    <div class="card-footer py-3 border-0" style="background-color: #e9f2fb;">
      <div class="d-flex flex-start w-100">
        <input type="text" id="username" name="username" style="display: none;">
        <div class="form-outline w-100">
          <textarea id="commentaire" name="commentaire" class="form-control" id="textAreaExample" 
            style="background: #fff;height: 500px;border-radius: 10px;resize: none;"></textarea>
          <label class="form-label" for="textAreaExample">Commentaire</label>
        </div>
        <div class="float-end" style="background-color: #e9f2fb;">
          <button type="submit" class="btn btn-primary p-1 btn-sm" style="width: 60px;height: 60px;border-radius: 50px;"><i class="fa fa-paper-plane"></i></button>
        </div>
      </div>
    </div>
  </form>
</div>

    <div id="comment-container">
        <% commentaires.forEach(commentaire => { %>
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-start align-items-center">
                <img class="rounded-circle shadow-1-strong me-3"
                  src="../assets/images/unknown.jpg" alt="avatar" width="60"
                  height="60" />
                <div>
                  <h6 class="fw-bold text-primary mb-1"><%= commentaire.auteur %></h6>
                  <p class="text-muted small mb-0">
                    <%= commentaire.contenu %>
                  </p>
                </div>
              </div>
  
              <p class="mt-3 mb-4 pb-2">
                <%= commentaire.contenu %>
              </p>
  
              <div class="small d-flex justify-content-start">
                <a href="#!" class="d-flex align-items-center me-3">
                  <i class="far fa-thumbs-up me-2"></i>
                  <p class="mb-0">Like</p>
                </a>
                <a href="#!" class="d-flex align-items-center me-3">
                  <i class="far fa-comment-dots me-2"></i>
                  <p class="mb-0">Comment</p>
                </a>
                <a href="#!" class="d-flex align-items-center me-3">
                  <i class="fas fa-share me-2"></i>
                  <p class="mb-0">Share</p>
                </a>
              </div>
            </div>
<% }); %>
      <button id="load-more" style="background-color: transparent; color: blue; text-decoration: underline; border: none;">Voir plus</button>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Récupérez la valeur du nom d'utilisateur depuis sessionStorage
      const userName= sessionStorage.getItem('userName');
      // Pré-remplissez le champ "username" avec la valeur du nom d'utilisateur
      const usernameInput = document.getElementById('username');
      usernameInput.value = userName;
      });
</script>
  <%- include('footer.ejs') %>